if ( ! wp_next_scheduled( 'sendreportlog_cron_hook' ) ) {\n    wp_schedule_event( strtotime('07:00:00'), 'daily', 'sendreportlog_cron_hook' );\n }\n \nadd_action( 'sendreportlog_cron_hook', 'sendreportlog_cron_function' );\n//  add_shortcode( 'sendreportlog_short', 'sendreportlog_cron_function' );\n add_action( 'wp_ajax_nopriv_sendreportlog_cron_function', 'sendreportlog_cron_function' );\n add_action( 'wp_ajax_sendreportlog_cron_function', 'sendreportlog_cron_function' );\n \n //Function that runs on cron\n function sendreportlog_cron_function(){\n     //FEEDSYNC XML\n     $urlXmlResidential_current = 'https://feedsyncppg.housedigital.com.au/?action=do_output&type=residential&status=current';\n     $urlXmlResidential_sold = 'https://feedsyncppg.housedigital.com.au/?action=do_output&type=residential&status=sold&days_back=60';\n     $urlXmlLand_current = 'https://feedsyncppg.housedigital.com.au/?action=do_output&type=land&status=current';\n     $urlXmlLand_sold = 'https://feedsyncppg.housedigital.com.au/?action=do_output&type=land&status=sold&days_back=60';\n     $urlXmlRental_current = 'https://feedsyncppg.housedigital.com.au/?action=do_output&type=rental&status=current';\n     $urlXmlRental_leased = 'https://feedsyncppg.housedigital.com.au/?action=do_output&type=rental&status=leased&days_back=30';\n \n     //xml residential current\n     $getfileXmlResidential_current = wp_remote_get( $urlXmlResidential_current );\n     $getbodyXmlResidential_current = wp_remote_retrieve_body( $getfileXmlResidential_current );\n     $getresultXmlResidential_current = simplexml_load_string($getbodyXmlResidential_current);\n     $getarrayXmlResidential_current = (array)$getresultXmlResidential_current;\n     $getcountXmlResidential_current = 0;\n     $getIDXmlResidential = [];\n     $getItemsXmlResidential = [];\n     $getAllXmlResidential = [];\n     $getCountAllXmlResidential = 0;\n     $getmodDateXmlResidentialALL = [];\n     $getCountAllXmlCommercial = 0;\n     $getChckStatusitemXmlResidentialALL = [];\n     $getChckStatusXmlResidentialALL = [];\n     //COMPOSITE\n     $AllCompositeResidentialitems = [];\n     $AllCompositeResidential = [];\n     $AllCompositeLanditems = [];\n     $AllCompositeLand = [];\n     $AllCompositeRentalitems = [];\n     $AllCompositeRental = [];\n     //Attachment\n     $getAllXmlResidentialAttachmentItem_current = [];\n     $getAllXmlResidentialAttachment_current = [];\n     \n     foreach($getarrayXmlResidential_current['residential'] as $items){\n         $array = (array)$items;\n         $photos = (array)$array['objects'];\n \n         $imageCount = 0;\n         $imagesDataItem = [];\n         $imagesDataItemALL = [];\n \n         foreach($photos['img'] as $images){\n             $imagesData = (array)$images;\n \n             if($imagesData['@attributes']['url']){\n                 $imagesDataItem = $imagesData['@attributes']['url'];\n \n                 array_push($imagesDataItemALL, $imagesDataItem);\n \n                 $imageCount++;\n             }\n         }\n \n         $getAllXmlResidentialAttachmentItem_current['ID'] = $array['uniqueID'];\n         $getAllXmlResidentialAttachmentItem_current['attach'] = $imagesDataItemALL;\n         array_push($getAllXmlResidentialAttachment_current, $getAllXmlResidentialAttachmentItem_current);\n \n         array_push($getIDXmlResidential, $array['uniqueID']);\n         array_push($getmodDateXmlResidentialALL, $array['@attributes']['modTime']);\n         \n         $addressDetails = (array)$array['address'];\n         $addressStreetNum = $addressDetails['streetNumber'];\n         $addressStreet = $addressDetails['street'];\n         $addressSuburb = $addressDetails['suburb'];\n         $addressState = $addressDetails['state'];\n         $addressPostcode = $addressDetails['postcode'];\n         \n         $getItemsXmlResidential['propID'] = $array['uniqueID'];\n         $getItemsXmlResidential['status'] = 'current';\n         $getItemsXmlResidential['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($getAllXmlResidential, $getItemsXmlResidential);\n \n \n         $AllCompositeResidentialitems['uniq_id'] = $array['uniqueID'];\n         $AllCompositeResidentialitems['status'] = 'current';\n         $AllCompositeResidentialitems['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($AllCompositeResidential, $AllCompositeResidentialitems);\n \n         $getChckStatusitemXmlResidentialALL['id'] = $array['uniqueID'];\n         $getChckStatusitemXmlResidentialALL['status'] = 'current';\n         $getChckStatusitemXmlResidentialALL['image_count'] = $imageCount;\n \n         array_push($getChckStatusXmlResidentialALL, $getChckStatusitemXmlResidentialALL);\n         \n         $getcountXmlResidential_current++;\n     }\n     //xml residential sold\n     $getfileXmlResidential_sold = wp_remote_get( $urlXmlResidential_sold );\n     $getbodyXmlResidential_sold = wp_remote_retrieve_body( $getfileXmlResidential_sold );\n     $getresultXmlResidential_sold = simplexml_load_string($getbodyXmlResidential_sold);\n     $getarrayXmlResidential_sold = (array)$getresultXmlResidential_sold;\n     $getcountXmlResidential_sold = 0;\n     $getmodDateXmlResidential_sold = [];\n     \n     foreach($getarrayXmlResidential_sold['residential'] as $items){\n         $array = (array)$items;\n         $photos = (array)$array['objects'];\n \n         $imageCount = 0;\n \n         foreach($photos['img'] as $images){\n             $imagesData = (array)$images;\n \n             if($imagesData['@attributes']['url']){\n                 $imageCount++;\n             }\n         }\n \n         array_push($getIDXmlResidential, $array['uniqueID']);\n         array_push($getmodDateXmlResidential_sold, $array['@attributes']['modTime']);\n         array_push($getmodDateXmlResidentialALL, $array['@attributes']['modTime']);\n         \n         $addressDetails = (array)$array['address'];\n         $addressStreetNum = $addressDetails['streetNumber'];\n         $addressStreet = $addressDetails['street'];\n         $addressSuburb = $addressDetails['suburb'];\n         $addressState = $addressDetails['state'];\n         $addressPostcode = $addressDetails['postcode'];\n         \n         $getItemsXmlResidential['propID'] = $array['uniqueID'];\n         $getItemsXmlResidential['status'] = 'sold';\n         $getItemsXmlResidential['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($getAllXmlResidential, $getItemsXmlResidential);\n \n         $AllCompositeResidentialitems['uniq_id'] = $array['uniqueID'];\n         $AllCompositeResidentialitems['status'] = 'sold';\n         $AllCompositeResidentialitems['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($AllCompositeResidential, $AllCompositeResidentialitems);\n \n         $getChckStatusitemXmlResidentialALL['id'] = $array['uniqueID'];\n         $getChckStatusitemXmlResidentialALL['status'] = 'sold';\n         $getChckStatusitemXmlResidentialALL['image_count'] = $imageCount;\n \n         array_push($getChckStatusXmlResidentialALL, $getChckStatusitemXmlResidentialALL);\n         \n         $getcountXmlResidential_sold++;\n     }\n     //get residential count, all result XML\n     foreach($getAllXmlResidential as $getAllXmlResidential_res){\n         $getCountAllXmlResidential++;\n     }\n \n     //xml land current\n     $getfileXmlLand_current = wp_remote_get( $urlXmlLand_current );\n     $getbodyXmlLand_current = wp_remote_retrieve_body( $getfileXmlLand_current );\n     $getresultXmlLand_current = simplexml_load_string($getbodyXmlLand_current);\n     $getarrayXmlLand_current = (array)$getresultXmlLand_current;\n     $getcountXmlLand_current = 0;\n     $getIDXmlLand = [];\n     $getItemsXmlLand = [];\n     $getAllXmlLand = [];\n     $getCountAllXmlLand = 0;\n     $getmodDateXmlLandALL = [];\n     $getChckStatusitemXmlLandALL = [];\n     $getChckStatusXmlLandALL = [];\n \n     foreach($getarrayXmlLand_current['land'] as $items){\n         $array = (array)$items;\n         $photos = (array)$array['objects'];\n \n         $imageCount = 0;\n \n         foreach($photos['img'] as $images){\n             $imagesData = (array)$images;\n \n             if($imagesData['@attributes']['url']){\n                 $imageCount++;\n             }\n         }\n \n         array_push($getIDXmlLand, $array['uniqueID']);\n         array_push($getmodDateXmlLandALL, $array['@attributes']['modTime']);\n \n         $addressDetails = (array)$array['address'];\n         $addressStreetNum = $addressDetails['streetNumber'];\n         $addressStreet = $addressDetails['street'];\n         $addressSuburb = $addressDetails['suburb'];\n         $addressState = $addressDetails['state'];\n         $addressPostcode = $addressDetails['postcode'];\n         \n         $getItemsXmlLand['propID'] = $array['uniqueID'];\n         $getItemsXmlLand['status'] = 'current';\n         $getItemsXmlLand['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($getAllXmlLand, $getItemsXmlLand);\n \n         $AllCompositeLanditems['uniq_id'] = $array['uniqueID'];\n         $AllCompositeLanditems['status'] = 'current';\n         $AllCompositeLanditems['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($AllCompositeLand, $AllCompositeLanditems);\n \n         $getChckStatusitemXmlLandALL['id'] = $array['uniqueID'];\n         $getChckStatusitemXmlLandALL['status'] = 'current';\n         $getChckStatusitemXmlLandALL['image_count'] = $imageCount;\n \n         array_push($getChckStatusXmlLandALL, $getChckStatusitemXmlLandALL);\n \n         $getcountXmlLand_current++;\n     }\n     //xml land sold\n     $getfileXmlLand_sold = wp_remote_get( $urlXmlLand_sold );\n     $getbodyXmlLand_sold = wp_remote_retrieve_body( $getfileXmlLand_sold );\n     $getresultXmlLand_sold = simplexml_load_string($getbodyXmlLand_sold);\n     $getarrayXmlLand_sold = (array)$getresultXmlLand_sold;\n     $getcountXmlLand_sold = 0;\n     $getmodDateXmlLand_sold = [];\n \n     foreach($getarrayXmlLand_sold['land'] as $items){\n         $array = (array)$items;\n         $photos = (array)$array['objects'];\n \n         $imageCount = 0;\n \n         foreach($photos['img'] as $images){\n             $imagesData = (array)$images;\n \n             if($imagesData['@attributes']['url']){\n                 $imageCount++;\n             }\n         }\n \n         array_push($getmodDateXmlLand_sold, $array['@attributes']['modTime']);\n         array_push($getmodDateXmlLandALL, $array['@attributes']['modTime']);\n         array_push($getIDXmlLand, $array['uniqueID']);\n \n         $addressDetails = (array)$array['address'];\n         $addressStreetNum = $addressDetails['streetNumber'];\n         $addressStreet = $addressDetails['street'];\n         $addressSuburb = $addressDetails['suburb'];\n         $addressState = $addressDetails['state'];\n         $addressPostcode = $addressDetails['postcode'];\n         \n         $getItemsXmlLand['propID'] = $array['uniqueID'];\n         $getItemsXmlLand['status'] = 'sold';\n         $getItemsXmlLand['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($getAllXmlLand, $getItemsXmlLand);\n \n         $AllCompositeLanditems['uniq_id'] = $array['uniqueID'];\n         $AllCompositeLanditems['status'] = 'sold';\n         $AllCompositeLanditems['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($AllCompositeLand, $AllCompositeLanditems);\n \n         $getChckStatusitemXmlLandALL['id'] = $array['uniqueID'];\n         $getChckStatusitemXmlLandALL['status'] = 'sold';\n         $getChckStatusitemXmlLandALL['image_count'] = $imageCount;\n \n         array_push($getChckStatusXmlLandALL, $getChckStatusitemXmlLandALL);\n \n         $getcountXmlLand_sold++;\n     }\n \n     //get land count, all result XML\n     foreach($getAllXmlLand as $getAllXmlLand_res){\n         $getCountAllXmlLand++;\n     }\n \n     //xml rental current\n     $getfileXmlRental_current = wp_remote_get( $urlXmlRental_current );\n     $getbodyXmlRental_current = wp_remote_retrieve_body( $getfileXmlRental_current );\n     $getresultXmlRental_current = simplexml_load_string($getbodyXmlRental_current);\n     $getarrayXmlRental_current = (array)$getresultXmlRental_current;\n     $getcountXmlRental_current = 0;\n     $getIDXmlRental = [];\n     $getItemsXmlRental = [];\n     $getAllXmlRental = [];\n     $getCountAllXmlRental = 0;\n     $getmodDateXmlRentalALL = [];\n     $getChckStatusitemXmlRentalALL = [];\n     $getChckStatusXmlRentalALL = [];\n \n     foreach($getarrayXmlRental_current['rental'] as $items){\n         $array = (array)$items;\n         $photos = (array)$array['objects'];\n \n         $imageCount = 0;\n \n         foreach($photos['img'] as $images){\n             $imagesData = (array)$images;\n \n             if($imagesData['@attributes']['url']){\n                 $imageCount++;\n             }\n         }\n \n         array_push($getIDXmlRental, $array['uniqueID']);\n         array_push($getmodDateXmlRentalALL, $array['@attributes']['modTime']);\n \n         $addressDetails = (array)$array['address'];\n         $addressStreetNum = $addressDetails['streetNumber'];\n         $addressStreet = $addressDetails['street'];\n         $addressSuburb = $addressDetails['suburb'];\n         $addressState = $addressDetails['state'];\n         $addressPostcode = $addressDetails['postcode'];\n         \n         $getItemsXmlRental['propID'] = $array['uniqueID'];\n         $getItemsXmlRental['status'] = 'current';\n         $getItemsXmlRental['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($getAllXmlRental, $getItemsXmlRental);\n \n         $AllCompositeRentalitems['uniq_id'] = $array['uniqueID'];\n         $AllCompositeRentalitems['status'] = 'current';\n         $AllCompositeRentalitems['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         array_push($AllCompositeRental, $AllCompositeRentalitems);\n \n         $getChckStatusitemXmlRentalALL['id'] = $array['uniqueID'];\n         $getChckStatusitemXmlRentalALL['status'] = 'current';\n         $getChckStatusitemXmlRentalALL['image_count'] = $imageCount;\n \n         array_push($getChckStatusXmlRentalALL, $getChckStatusitemXmlRentalALL);\n \n         $getcountXmlRental_current++;\n     }\n     //xml rental leased\n     $getfileXmlRental_leased = wp_remote_get( $urlXmlRental_leased );\n     $getbodyXmlRental_leased = wp_remote_retrieve_body( $getfileXmlRental_leased );\n     $getresultXmlRental_leased = simplexml_load_string($getbodyXmlRental_leased);\n     $getarrayXmlRental_leased = (array)$getresultXmlRental_leased;\n     $getcountXmlRental_leased = 0;\n     $getmodDateXmlRental_leased = [];\n     $getcountXmlCommercial = 0;\n \n     foreach($getarrayXmlRental_leased['rental'] as $items){\n         $array = (array)$items;\n         array_push($getmodDateXmlRental_leased, $array['@attributes']['modTime']);\n         array_push($getmodDateXmlRentalALL, $array['@attributes']['modTime']);\n \n         array_push($getIDXmlRental, $array['uniqueID']);\n \n         $addressDetails = (array)$array['address'];\n         $addressStreetNum = $addressDetails['streetNumber'];\n         $addressStreet = $addressDetails['street'];\n         $addressSuburb = $addressDetails['suburb'];\n         $addressState = $addressDetails['state'];\n         $addressPostcode = $addressDetails['postcode'];\n         \n         // $getItemsXmlRental['propID'] = $array['uniqueID'];\n         // $getItemsXmlRental['status'] = 'leased';\n         // $getItemsXmlRental['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         // array_push($getAllXmlRental, $getItemsXmlRental);\n \n         // $AllCompositeRentalitems['uniq_id'] = $array['uniqueID'];\n         // $AllCompositeRentalitems['status'] = 'leased';\n         // $AllCompositeRentalitems['address'] = $addressStreetNum.' '.$addressStreet.', '.$addressSuburb.' '.$addressState.' '.$addressPostcode;\n         // array_push($AllCompositeRental, $AllCompositeRentalitems);\n \n         $getChckStatusitemXmlRentalALL['id'] = $array['uniqueID'];\n         $getChckStatusitemXmlRentalALL['status'] = 'leased';\n \n         array_push($getChckStatusXmlRentalALL, $getChckStatusitemXmlRentalALL);\n \n         $getcountXmlRental_leased++;\n     }\n     //get rental count, all result XML\n     foreach($getAllXmlRental as $getAllXmlRental_res){\n         $getCountAllXmlRental++;\n     }\n \n     //FEEDSYNC DB\n     $servername = 'bne-cp060.web-host.com.au';\n     $username = 'feedsyncppg_checker';\n     $password = 'WQx^bgRMxJJY';\n \n     // Create connection\n     $conn = new mysqli($servername, $username, $password, 'feedsyncppg_feedsyncppg');\n \n     // Check connection\n     if ($conn->connect_error) {\n         die("Connection failed: " . $conn->connect_error);\n     } \n \n     $sql_residential = "SELECT * FROM feedsync WHERE type = 'residential' ";\n     $sql_rental = "SELECT * FROM feedsync WHERE type = 'rental' ";\n     $sql_land = "SELECT * FROM feedsync WHERE type = 'land' ";\n     $sql_commercial = "SELECT * FROM feedsync WHERE type = 'commercial' ";\n \n     $residential_results = $conn->query($sql_residential);\n     $rental_results = $conn->query($sql_rental);\n     $land_results = $conn->query($sql_land);\n     $commercial_results = $conn->query($sql_commercial);\n     // $tables = $results->fetch_all();\n     $residentialCount_current = 0;\n     $residentialCount_sold = 0;\n     $rentalCount_current = 0;\n     $rentalCount_leased = 0;\n     $landCount_current = 0;\n     $landCount_sold = 0;\n     $commercialCount = 0;\n     $residentialCountAll = 0;\n     $landCountAll = 0;\n     $rentalCountAll = 0;\n     $commercialCountAll = 0;\n     $feedResidentialID = [];\n     $feedRentalID = [];\n     $feedLandID = [];\n     $feedCommercialID = [];\n     $getChckStatusitemDBResidentialALL = [];\n     $getChckStatusitemDBLandALL = [];\n     $getChckStatusitemDBRentalALL = [];\n     $getChckStatusDBResidentialALL = [];\n     $getChckStatusDBLandALL = [];\n     $getChckStatusDBRentalALL = [];\n     \n     //Commercial FeedSync\n     // foreach($commercial_results as $commercial_result){\n     //     if($commercial_result){\n     //         $commercialCount = 'Record found';\n     //     }else{\n     //         $commercialCount = 'none record found';\n     //     }\n     // }\n \n     //Residential FeedSync\n     foreach($residential_results as $residential_result){\n \n         if($residential_result['status'] == 'current'){\n             $residentialCount_current++;\n         }\n \n         if($residential_result['status'] == 'sold'){\n \n             $residentialModDate = str_replace(' ', '-', $residential_result['mod_date']);\n             if(in_array($residentialModDate, $getmodDateXmlResidential_sold)){\n                 $residentialCount_sold++;\n             }\n \n         }\n \n         if($residential_result['status'] == 'current' || $residential_result['status'] == 'sold'){\n \n             $residentialModDate = str_replace(' ', '-', $residential_result['mod_date']);\n             if(in_array($residentialModDate, $getmodDateXmlResidentialALL)){\n                 array_push($feedResidentialID, $residential_result['unique_id']);\n \n                 $getChckStatusitemDBResidentialALL['id'] = $residential_result['unique_id'];\n                 $getChckStatusitemDBResidentialALL['status'] = $residential_result['status'];\n \n                 array_push($getChckStatusDBResidentialALL, $getChckStatusitemDBResidentialALL);\n \n                 $AllCompositeResidentialitems['uniq_id'] = $residential_result['unique_id'];\n                 $AllCompositeResidentialitems['status'] = $residential_result['status'];\n                 $AllCompositeResidentialitems['address'] = $residential_result['address'];\n                 array_push($AllCompositeResidential, $AllCompositeResidentialitems);\n \n                 $residentialCountAll++;\n             }\n         }\n     }\n     //Rental FeedSync\n     foreach($rental_results as $rental_result){\n \n         if($rental_result['status'] == 'current'){\n             $rentalCount_current++;\n         }\n \n         if($rental_result['status'] == 'leased'){\n \n             $rentalModDate = str_replace(' ', '-', $rental_result['mod_date']);\n             if(in_array($rentalModDate, $getmodDateXmlRental_leased)){\n                 $rentalCount_leased++;\n             }\n         }\n \n         if($rental_result['status'] == 'current'){\n \n             $rentalModDate = str_replace(' ', '-', $rental_result['mod_date']);\n             if(in_array($rentalModDate, $getmodDateXmlRentalALL)){\n                 array_push($feedRentalID, $rental_result['unique_id']);\n \n                 $getChckStatusitemDBRentalALL['id'] = $rental_result['unique_id'];\n                 $getChckStatusitemDBRentalALL['status'] = $rental_result['status'];\n \n                 array_push($getChckStatusDBRentalALL, $getChckStatusitemDBRentalALL);\n \n                 $AllCompositeRentalitems['uniq_id'] = $rental_result['unique_id'];\n                 $AllCompositeRentalitems['status'] = $rental_result['status'];\n                 $AllCompositeRentalitems['address'] = $rental_result['address'];\n                 array_push($AllCompositeRental, $AllCompositeRentalitems);\n \n                 $rentalCountAll++;\n             }\n         }\n     }\n     //Land FeedSync\n     foreach($land_results as $land_result){\n \n         if($land_result['status'] == 'current'){\n             $landCount_current++;\n         }\n \n         if($land_result['status'] == 'sold'){\n \n             $landModDate = str_replace(' ', '-', $land_result['mod_date']);\n             if(in_array($landModDate, $getmodDateXmlLand_sold)){\n                 $landCount_sold++;\n             }\n         }\n \n         if($land_result['status'] == 'current' || $land_result['status'] == 'sold'){\n \n             $landModDate = str_replace(' ', '-', $land_result['mod_date']);\n             if(in_array($landModDate, $getmodDateXmlLandALL)){\n                 array_push($feedLandID, $land_result['unique_id']);\n \n                 $getChckStatusitemDBLandALL['id'] = $land_result['unique_id'];\n                 $getChckStatusitemDBLandALL['status'] = $land_result['status'];\n \n                 array_push($getChckStatusDBLandALL, $getChckStatusitemDBLandALL);\n \n                 $AllCompositeLanditems['uniq_id'] = $land_result['unique_id'];\n                 $AllCompositeLanditems['status'] = $land_result['status'];\n                 $AllCompositeLanditems['address'] = $land_result['address'];\n                 array_push($AllCompositeLand, $AllCompositeLanditems);\n \n                 $landCountAll++;\n             }\n         }\n     }\n \n     //PROPERTIES POST type\n     $argsProperties = array(\n         'post_type'         =>  'property',\n         'posts_per_page'    =>  -1,\n         'post_status'       =>  'publish'\n     );\n             \n     $queryProperties = new WP_Query( $argsProperties );\n     // $totalProperties = $queryProperties->found_posts;\n     $totalProperties_current = 0;\n     $totalProperties_sold = 0;\n     $residentialCountAllpost = 0;\n     $siteResidentialID = [];\n     $getChckStatusitemPostResidentialALL = [];\n     $getChckStatusPostResidentialALL = [];\n \n     if ( $queryProperties->have_posts() ) {\n \n         while ( $queryProperties->have_posts() ) {\n             $queryProperties->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             $attachments = get_children(\n                 array(\n                     'post_parent'    => get_the_ID(),\n                     'post_type'      => 'attachment',\n                     'post_mime_type' => 'image',\n                 )\n             );\n \n             $countGallery_m = 0;\n         \n             foreach($attachments as $a){\n                 $r = (array)$a;\n \n                 if($r['post_parent'] == get_the_ID()){\n                     $countGallery_m++;\n                 }\n             }\n \n \n             if($meta['property_status'][0] == 'current'){\n                 $totalProperties_current++;\n             }\n \n             if($meta['property_status'][0] == 'sold'){\n                 $totalProperties_sold++;\n             }\n             if($meta['property_status'][0] == 'current' || $meta['property_status'][0] == 'sold'){\n \n                 array_push($siteResidentialID, $meta['property_unique_id'][0]);\n \n                 $getChckStatusitemPostResidentialALL['id'] = $meta['property_unique_id'][0];\n                 $getChckStatusitemPostResidentialALL['status'] = $meta['property_status'][0];\n \n                 array_push($getChckStatusPostResidentialALL, $getChckStatusitemPostResidentialALL);\n \n                 $AllCompositeResidentialitems['uniq_id'] = $meta['property_unique_id'][0];\n                 $AllCompositeResidentialitems['status'] = $meta['property_status'][0];\n                 $AllCompositeResidentialitems['address'] = get_the_title();\n                 array_push($AllCompositeResidential, $AllCompositeResidentialitems);\n \n                 $residentialCountAllpost++;\n             }\n         \n         }\n     }\n     wp_reset_postdata();\n \n     //LAND POST type\n     $argsLand = array(\n         'post_type'         =>  'land',\n         'posts_per_page'    =>  -1,\n         'post_status'       =>  'publish'\n     );\n             \n     $queryLand = new WP_Query( $argsLand );\n     // $totalLand = $queryLand->found_posts;\n     $totalLand_current = 0;\n     $totalLand_sold = 0;\n     $landCountAllpost = 0;\n     $siteLandID = [];\n     $getChckStatusitemPostLandALL = [];\n     $getChckStatusPostLandALL = [];\n \n     if ( $queryLand->have_posts() ) {\n \n         while ( $queryLand->have_posts() ) {\n             $queryLand->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             if($meta['property_status'][0] == 'current'){\n                 $totalLand_current++;\n             }\n \n             if($meta['property_status'][0] == 'sold'){\n                 $totalLand_sold++;\n             }\n             if($meta['property_status'][0] == 'current' || $meta['property_status'][0] == 'sold'){\n                 array_push($siteLandID, $meta['property_unique_id'][0]);\n \n                 $getChckStatusitemPostLandALL['id'] = $meta['property_unique_id'][0];\n                 $getChckStatusitemPostLandALL['status'] = $meta['property_status'][0];\n \n                 array_push($getChckStatusPostLandALL, $getChckStatusitemPostLandALL);\n \n                 $AllCompositeLanditems['uniq_id'] = $meta['property_unique_id'][0];\n                 $AllCompositeLanditems['status'] = $meta['property_status'][0];\n                 $AllCompositeLanditems['address'] = get_the_title();\n                 array_push($AllCompositeLand, $AllCompositeLanditems);\n \n                 $landCountAllpost++;\n             }\n         \n         }\n     }\n     wp_reset_postdata();\n \n     //RENTAL POST type\n     $argsRental = array(\n         'post_type'         =>  'rental',\n         'posts_per_page'    =>  -1,\n         'post_status'       =>  'publish'\n     );\n             \n     $queryRental = new WP_Query( $argsRental );\n     // $totalRental = $queryRental->found_posts;\n     $totalRental_current = 0;\n     $totalRental_leased = 0;\n     $rentalCountAllpost = 0;\n     $siteRentalID = [];\n     $getChckStatusitemPostRentalALL = [];\n     $getChckStatusPostRentalALL = [];\n \n     if ( $queryRental->have_posts() ) {\n \n         while ( $queryRental->have_posts() ) {\n             $queryRental->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             if($meta['property_status'][0] == 'current'){\n                 $totalRental_current++;\n             }\n \n             if($meta['property_status'][0] == 'leased'){\n                 $totalRental_leased++;\n             }\n             if($meta['property_status'][0] == 'current'){\n                 array_push($siteRentalID, $meta['property_unique_id'][0]);\n \n                 $getChckStatusitemPostRentalALL['id'] = $meta['property_unique_id'][0];\n                 $getChckStatusitemPostRentalALL['status'] = $meta['property_status'][0];\n \n                 array_push($getChckStatusPostRentalALL, $getChckStatusitemPostRentalALL);\n \n                 $rentalCountAllpost++;\n \n                 $AllCompositeRentalitems['uniq_id'] = $meta['property_unique_id'][0];\n                 $AllCompositeRentalitems['status'] = $meta['property_status'][0];\n                 $AllCompositeRentalitems['address'] = get_the_title();\n                 array_push($AllCompositeRental, $AllCompositeRentalitems);\n             }\n         \n         }\n     }\n     wp_reset_postdata();\n \n     //COMMERCIAL POST type\n     $argsCommercial = array(\n         'post_type'         =>  'commercial',\n         'posts_per_page'    =>  -1,\n         'post_status'       =>  'publish'\n     );\n             \n     $queryCommercial = new WP_Query( $argsCommercial );\n     $totalCommercial = $queryCommercial->found_posts;\n     $siteCommercialID = [];\n     $commercialCountAllpost = 0;\n     $getChckStatusitemPostCommercialALL = [];\n     $getChckStatusPostCommercialALL = [];\n \n     if ( $queryCommercial->have_posts() ) {\n \n         while ( $queryCommercial->have_posts() ) {\n             $queryCommercial->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             if($meta['property_status'][0] == 'current' || $meta['property_status'][0] == 'sold' && $meta['property_status'][0] == 'leased'){\n                 array_push($siteCommercialID, $meta['property_unique_id'][0]);\n \n                 $getChckStatusitemPostCommercialALL['id'] = $meta['property_unique_id'][0];\n                 $getChckStatusitemPostCommercialALL['status'] = $meta['property_status'][0];\n \n                 array_push($getChckStatusPostCommercialALL, $getChckStatusitemPostCommercialALL);\n \n                 $commercialCountAllpost++;\n             }\n         \n         }\n     }\n     wp_reset_postdata();\n \n     //API REQUEST\n     $urlResidential_current = 'https://ap-southeast-2.api.vaultre.com.au/api/v1.3/properties/residential/sale?publishedOnPortals=332&pagesize=200';\n     $urlRental_current = 'https://ap-southeast-2.api.vaultre.com.au/api/v1.3/properties/residential/lease?publishedOnPortals=332&pagesize=200';\n     $urlLand_current = 'https://ap-southeast-2.api.vaultre.com.au/api/v1.3/properties/land/sale?publishedOnPortals=332&pagesize=200';\n \n     $urlCommercial_current = 'https://ap-southeast-2.api.vaultre.com.au/api/v1.3/properties/commercial/sale?publishedOnPortals=332&pagesize=200';\n     $urlCommercial_leased = 'https://ap-southeast-2.api.vaultre.com.au/api/v1.3/properties/commercial/lease?publishedOnPortals=332&pagesize=200';\n \n     $args = array(\n         'headers' => array(\n             'Content-Type'  =>  'application/json',\n             'Authorization' =>  'Bearer uumrxqafuygepfxktcritqfqjxsazvjllsakdipm',\n             'X-Api-Key'     =>  'uwBk6bvjCV4LJotgmFKiu4uJESyDRD419yAdIl8o'\n         ),\n         'timeout' => 10\n     );\n \n     //Residential Current API\n     $resResidential_current = wp_remote_get( $urlResidential_current, $args );\n     $resResidential_current_body = wp_remote_retrieve_body( $resResidential_current );\n     $dataResidential_current = json_decode($resResidential_current_body);\n     $arrayResidential_current = (array)$dataResidential_current;\n     $apiResidentialID = [];\n     $itemsResidentialAPI = [];\n     $AllResidentialAPI = [];\n     $CountAllResidentialAPI = 0;\n     $CountAllResidentialVaultRE = 0;\n     $getChckStatusitemAPIResidentialALL = [];\n     $getChckStatusAPIResidentialALL = [];\n \n     foreach($arrayResidential_current['items'] as $item){\n         $array = (array)$item;\n         $photos = (array)$array['photos'];\n \n         if($array['portalStatus'] != 'unconditional'){\n \n             $sl_ID = 'L'.$array['saleLifeId'];\n             array_push($apiResidentialID, $sl_ID);\n \n             $imageCount = 0;\n             foreach($photos as $p){\n                 $imagearray = (array)$p;\n \n                 if($imagearray['published'] == 1 && $imagearray['type'] == 'Photograph'){\n                     $imageCount++;\n \n                 }\n             }\n \n             $CountAllResidentialVaultRE++;\n             \n             $address_details = (array)$array['address'];\n             $suburb_details = (array)$address_details['suburb'];\n             $state_details = (array)$suburb_details['state'];\n             \n             $itemsResidentialAPI['propID'] = $sl_ID;\n             $itemsResidentialAPI['status'] = 'current';\n             $itemsResidentialAPI['address'] = $address_details['streetNumber'].' '.$address_details['street'].', '.$suburb_details['name'].' '.$state_details['abbreviation'].' '.$suburb_details['postcode'];\n             \n             $getChckStatusitemAPIResidentialALL['id'] = $sl_ID;\n             $getChckStatusitemAPIResidentialALL['status'] = 'current';\n             $getChckStatusitemAPIResidentialALL['image_count'] = $imageCount;\n             \n             array_push($getChckStatusAPIResidentialALL, $getChckStatusitemAPIResidentialALL);\n             \n             array_push($AllResidentialAPI, $itemsResidentialAPI);\n             \n             $AllCompositeResidentialitems['uniq_id'] = $sl_ID;\n             $AllCompositeResidentialitems['status'] = 'current';\n             $AllCompositeResidentialitems['address'] = $address_details['streetNumber'].' '.$address_details['street'].', '.$suburb_details['name'].' '.$state_details['abbreviation'].' '.$suburb_details['postcode'];\n             array_push($AllCompositeResidential, $AllCompositeResidentialitems);\n         }\n     }\n \n     //get residential count, all result API\n     foreach($AllResidentialAPI as $AllResidentialAPI_res){\n         $CountAllResidentialAPI++;\n     }\n \n     //Rental Current API\n     $resRental_current = wp_remote_get( $urlRental_current, $args );\n     $resRental_current_body = wp_remote_retrieve_body( $resRental_current );\n     $dataRental_current = json_decode($resRental_current_body);\n     $arrayRental_current = (array)$dataRental_current;\n     $apiRentalID = [];\n     $itemsRentalAPI = [];\n     $AllRentalAPI = [];\n     $CountAllRentalAPI = 0;\n     $getChckStatusitemAPIRentalALL = [];\n     $getChckStatusAPIRentalALL = [];\n     $apiRentalOverviewCount = 0;\n \n     foreach($arrayRental_current['items'] as $item){\n         $array = (array)$item;\n         $photos = (array)$array['photos'];\n \n         if($array['available'] == 1){\n \n             $ll_ID = 'R'.$array['leaseLifeId'];\n             array_push($apiRentalID, $ll_ID);\n \n             $imageCount = 0;\n             foreach($photos as $p){\n                 $imagearray = (array)$p;\n \n                 if($imagearray['published'] == 1 && $imagearray['type'] == 'Photograph'){\n                     $imageCount++;\n \n                 }\n             }\n             \n             $address_details = (array)$array['address'];\n             $suburb_details = (array)$address_details['suburb'];\n             $state_details = (array)$suburb_details['state'];\n             \n             $itemsRentalAPI['propID'] = $ll_ID;\n             $itemsRentalAPI['status'] = 'current';\n             $itemsRentalAPI['address'] = $address_details['streetNumber'].' '.$address_details['street'].', '.$suburb_details['name'].' '.$state_details['abbreviation'].' '.$suburb_details['postcode'];\n             \n             $apiRentalOverviewCount++;\n             \n             $getChckStatusitemAPIRentalALL['id'] = $ll_ID;\n             $getChckStatusitemAPIRentalALL['status'] = 'current';\n             $getChckStatusitemAPIRentalALL['image_count'] = $imageCount;\n             \n             array_push($getChckStatusAPIRentalALL, $getChckStatusitemAPIRentalALL);\n             \n             array_push($AllRentalAPI, $itemsRentalAPI);\n         }\n     }\n \n     //get rental count, all result API\n     $AllRentalAPIduplicateID = [];\n     foreach($AllRentalAPI as $AllRentalAPI_res){\n         $AllRentalAPIid_api = $AllRentalAPI_res['propID'];\n         if(!in_array($AllRentalAPIid_api, $AllRentalAPIduplicateID)){\n             \n             $CountAllRentalAPI++;\n \n             array_push($AllRentalAPIduplicateID, $AllRentalAPIid_api);\n         }\n     }\n \n     //Land Current API\n     $resLand_current = wp_remote_get( $urlLand_current, $args );\n     $resLand_current_body = wp_remote_retrieve_body( $resLand_current );\n     $dataLand_current = json_decode($resLand_current_body);\n     $arrayLand_current = (array)$dataLand_current;\n     $apiLandID = [];\n     $itemsLandAPI = [];\n     $AllLandAPI = [];\n     $CountAllLandAPI = 0;\n     $getChckStatusitemAPILandALL = [];\n     $getChckStatusAPILandALL = [];\n \n     foreach($arrayLand_current['items'] as $item){\n         $array = (array)$item;\n         $photos = (array)$array['photos'];\n \n         $sl_ID = 'L'.$array['saleLifeId'];\n         array_push($apiLandID, $sl_ID);\n \n         $imageCount = 0;\n         foreach($photos as $p){\n             $imagearray = (array)$p;\n \n             if($imagearray['published'] == 1 && $imagearray['type'] == 'Photograph'){\n                 $imageCount++;\n \n             }\n         }\n \n         $address_details = (array)$array['address'];\n         $suburb_details = (array)$address_details['suburb'];\n         $state_details = (array)$suburb_details['state'];\n         \n         $itemsLandAPI['propID'] = $sl_ID;\n         $itemsLandAPI['status'] = 'current';\n         $itemsLandAPI['address'] = $address_details['streetNumber'].' '.$address_details['street'].', '.$suburb_details['name'].' '.$state_details['abbreviation'].' '.$suburb_details['postcode'];\n \n         $getChckStatusitemAPILandALL['id'] = $sl_ID;\n         $getChckStatusitemAPILandALL['status'] = 'current';\n         $getChckStatusitemAPILandALL['image_count'] = $imageCount;\n \n         array_push($getChckStatusAPILandALL, $getChckStatusitemAPILandALL);\n \n         array_push($AllLandAPI, $itemsLandAPI);\n \n         $AllCompositeLanditems['uniq_id'] = $sl_ID;\n         $AllCompositeLanditems['status'] = 'current';\n         $AllCompositeLanditems['address'] = $address_details['streetNumber'].' '.$address_details['street'].', '.$suburb_details['name'].' '.$state_details['abbreviation'].' '.$suburb_details['postcode'];\n         array_push($AllCompositeLand, $AllCompositeLanditems);\n     }\n \n \n \n     // SEND REPORT TO EMAIL \n     $multiple_recipients = array(\n         'jr@housedigital.com.au',\n         'jo@housedigital.com.au',\n         'ross.minney@devhouse.com.au',\n\t\t 'admin@housetechgroup.com.au'\n     );\n \n     $to = 'jr@housedigital.com.au';\n     $subject = 'Property Sync Checker Report Log';\n     $headers = array('Content-Type: text/html; charset=UTF-8');\n \n     $logCount = 0;\n \n \n     $body = '<table style="border:1px solid #000;">\n         <thead>\n             <tr>\n                 <th>Property ID</th>\n                 <th style="width: 430px;">Address</th>\n                 <th>Status</th>\n                 <th>Property Images</th>\n                 <th>FeedSync XML</th>\n                 <th>VaultRE</th>\n                 <th>Featured Image</th>\n                 <th>Type</th>\n             </tr>\n         </thead>\n         <tbody>'; \n \n     // RESIDENTIAL REPORT LOG\n     if ( $queryProperties->have_posts() ) {\n \n         while ( $queryProperties->have_posts() ) {\n             $queryProperties->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             $attachments = get_children(\n                 array(\n                     'post_parent'    => get_the_ID(),\n                     'post_type'      => 'attachment',\n                     'post_mime_type' => 'image',\n                 )\n             );\n \n             $countGallery = 0;\n             $ErrorcountGallery = 0;\n             $imgvcontent = [];\n         \n             foreach($attachments as $a){\n                 $r = (array)$a;\n \n                 if($r['post_parent'] == get_the_ID()){\n \n                     $t = get_headers($r['guid'], 1);\n \n                     if($t[0] == 'HTTP/1.1 404 nonet Found'){\n                         $imgv = $r['guid'];\n                         array_push($imgvcontent, $imgv);\n                         $ErrorcountGallery++;\n                     }\n                     \n                     $countGallery++;\n                 }\n             }\n \n             if($meta['property_status'][0] == 'current' || $meta['property_status'][0] == 'sold'){\n \n                 if(in_array($meta['property_unique_id'][0], $getIDXmlResidential)){\n                     foreach($getChckStatusXmlResidentialALL as $resData){\n                         if($resData['id'] == $meta['property_unique_id'][0]){\n                             if($resData['image_count'] != $countGallery){\n                                 $logCount++;\n                                 $body .= '<tr class="status-red">\n                                     <td>'.$meta['property_unique_id'][0].'</td>\n                                     <td>'.get_the_title().'</td>\n                                     <td>['.$meta['property_status'][0].']</td>';\n                                     // WEBSITE\n                                     if ( $attachments ) {\n \n                                         if($ErrorcountGallery > 0){\n                                             \n                                             $body .= '<td><small style="color:#ff8383;">['.$ErrorcountGallery.'] Missing</small></td>';\n                                         }else{\n \n                                             $body .= '<td>['.$countGallery.']</td>';\n                                         }\n                                     }else{\n                                         $body .= '<td>[0]</td>';\n                                     }\n                                     // FEEDSYNC XML\n                                     if(in_array($meta['property_unique_id'][0], $getIDXmlResidential)){\n                                         foreach($getChckStatusXmlResidentialALL as $resData){\n                                             if($resData['id'] == $meta['property_unique_id'][0]){\n                                                 $body .= '<td>['.$resData['image_count'].']</td>';\n                                             }\n                                         }\n                                     }else{\n                                         $body .= '<td>none</td>';\n                                     }\n                                     // VAULTRE\n                                     if(in_array($meta['property_unique_id'][0], $apiResidentialID)){\n                                         foreach($getChckStatusAPIResidentialALL as $resData){\n                                             if($resData['id'] == $meta['property_unique_id'][0]){\n                                                 $body .= '<td>['.$resData['image_count'].']</td>';\n                                             }\n                                         }\n                                     }else{\n                                         $body .= '<td>none</td>';\n                                     }\n                                     // FEATURED IMAGE\n                                     if (has_post_thumbnail( get_the_ID()) ){\n \n                                         $image = wp_get_attachment_image_src( get_post_thumbnail_id( get_the_ID()), 'thumbnail');\n                                         $imgChck = get_headers($image[0], 1);\n \n                                         if($imgChck[0] != 'HTTP/1.1 404 nonet Found'){\n                                             \n                                             $body .= '<td>Yes</td>';\n                                         }else{\n                                             \n                                             $body .= '<td>Yes <small style="color:#ff8383;">Missing</small></td>';\n                                         }\n \n                                     }else{\n                                         $body .= '<td>none</td>';\n                                     }\n                                     $body .= '<td>Residential</td>';\n                                 $body .= '</tr>';\n                             }\n                         }\n                     }\n                 }\n                 \n             }\n         }\n     }\n     wp_reset_postdata();\n     \n     // LAND REPORT LOG\n     if ( $queryLand->have_posts() ) {\n \n         while ( $queryLand->have_posts() ) {\n             $queryLand->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             $attachments = get_children(\n                 array(\n                     'post_parent'    => get_the_ID(),\n                     'post_type'      => 'attachment',\n                     'post_mime_type' => 'image',\n                 )\n             );\n \n             $countGallery = 0;\n         \n             foreach($attachments as $a){\n                 $r = (array)$a;\n \n                 if($r['post_parent'] == get_the_ID()){\n                     $countGallery++;\n                 }\n             }\n \n             if($meta['property_status'][0] == 'current' || $meta['property_status'][0] == 'sold'){\n                 if(in_array($meta['property_unique_id'][0], $getIDXmlLand)){\n                     foreach($getChckStatusXmlLandALL as $resData){\n                         if($resData['id'] == $meta['property_unique_id'][0]){\n                             if($resData['image_count'] != $countGallery){\n                                 $logCount++;\n                                 $body .= '<tr class="status-red">\n                                     <td>'.$meta['property_unique_id'][0].'</td>\n                                     <td>'.get_the_title().'</td>\n                                     <td>['.$meta['property_status'][0].']</td>';\n                                 // WEBSITE\n                                 if ( $attachments ) {\n                                     $body .= '<td>['.$countGallery.']</td>';\n                     \n                                 }else{\n                                     $body .= '<td>[0]</td>';\n                                 }\n                                 // FEEDSYNC XML\n                                 if(in_array($meta['property_unique_id'][0], $getIDXmlLand)){\n                                     foreach($getChckStatusXmlLandALL as $resData){\n                                         if($resData['id'] == $meta['property_unique_id'][0]){\n                                             $body .= '<td>['.$resData['image_count'].']</td>';\n                                         }\n                                     }\n                                 }else{\n                                     $body .= '<td>none</td>';\n                                 }\n                                 // VAULTRE\n                                 if(in_array($meta['property_unique_id'][0], $apiLandID)){\n                                     foreach($getChckStatusAPILandALL as $resData){\n                                         if($resData['id'] == $meta['property_unique_id'][0]){\n                                             $body .= '<td>['.$resData['image_count'].']</td>';\n                                         }\n                                     }\n                                 }else{\n                                     $body .= '<td>none</td>';\n                                 }\n                                 // FEATURED IMAGE\n                                 if (has_post_thumbnail( get_the_ID()) ){\n \n                                     $image = wp_get_attachment_image_src( get_post_thumbnail_id( get_the_ID()), 'thumbnail');\n                                     $body .= '<td>Yes</td>';\n                                 }else{\n                                     $body .= '<td>none</td>';\n                                 }\n                                 $body .= '<td>Land</td>';\n                                 \n                                 $body .= '</tr>';\n                             }\n                         }\n                     }\n                 }    \n             }\n         }\n     }\n     wp_reset_postdata();\n \n     // RENTAL REPORT LOG\n     if ( $queryRental->have_posts() ) {\n \n         while ( $queryRental->have_posts() ) {\n             $queryRental->the_post(); \n \n             $meta = get_post_meta(get_the_ID());\n \n             $attachments = get_children(\n                 array(\n                     'post_parent'    => get_the_ID(),\n                     'post_type'      => 'attachment',\n                     'post_mime_type' => 'image',\n                 )\n             );\n \n             $countGallery = 0;\n         \n             foreach($attachments as $a){\n                 $r = (array)$a;\n \n                 if($r['post_parent'] == get_the_ID()){\n                     $countGallery++;\n                 }\n             }\n \n             if($meta['property_status'][0] == 'current'){\n \n                 if(in_array($meta['property_unique_id'][0], $getIDXmlRental)){\n                     foreach($getChckStatusXmlRentalALL as $resData){\n                         if($resData['id'] == $meta['property_unique_id'][0]){\n                             if($resData['image_count'] != $countGallery){\n                                 $logCount++;\n                                 $body .= '<tr class="status-red">\n                                 <td>'.$meta['property_unique_id'][0].'</td>\n                                 <td>'.get_the_title().'</td>\n                                 <td>['.$meta['property_status'][0].']</td>';\n                                 // WEBSITE\n                                 if ( $attachments ) {\n                                     $body .= '<td>['.$countGallery.']</td>';\n                     \n                                 }else{\n                                     $body .= '<td>[0]</td>';\n                                 }\n                                 // FEEDSYNC XML\n                                 if(in_array($meta['property_unique_id'][0], $getIDXmlRental)){\n                                     foreach($getChckStatusXmlRentalALL as $resData){\n                                         if($resData['id'] == $meta['property_unique_id'][0]){\n                                             $body .= '<td>['.$resData['image_count'].']</td>';\n                                         }\n                                     }\n                                 }else{\n                                     $body .= '<td>none</td>';\n                                 }\n                                 // VAULTRE\n                                 if(in_array($meta['property_unique_id'][0], $apiRentalID)){\n                                     foreach($getChckStatusAPIRentalALL as $resData){\n                                         if($resData['id'] == $meta['property_unique_id'][0]){\n                                             $body .= '<td>['.$resData['image_count'].']</td>';\n                                         }\n                                     }\n                                 }else{\n                                     $body .= '<td>none</td>';\n                                 }\n                                 // FEATURED IMAGE\n                                 if (has_post_thumbnail( get_the_ID()) ){\n \n                                     $image = wp_get_attachment_image_src( get_post_thumbnail_id( get_the_ID()), 'thumbnail');\n                                     $body .= '<td>Yes</td>';\n                                 }else{\n                                     $body .= '<td>none</td>';\n                                 }\n                                 $body .= '<td>Rental</td>';\n                                 \n                                 $body .= '</tr>';\n                             }\n                         }\n                     }\n                 }  \n             }\n         }\n     }\n     wp_reset_postdata();\n     if($logCount == 0){\n         $body .= 'no-issues'; \n     }\n \n     $body .= '</tbody>\n     </table>';\n\n     $clead_body = strip_tags($body);\n\n    if(!str_contains($clead_body, 'no-issues')) { \n        // $multiple_recipients\n         wp_mail( $multiple_recipients, $subject, $body, $headers );\n    }\n \n }
